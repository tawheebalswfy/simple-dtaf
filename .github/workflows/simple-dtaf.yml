name: Simple DTAF Environment

on:
  workflow_dispatch:

jobs:
  run-dtaf:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout Code
      uses: actions/checkout@v4
    
    - name: Setup Basic Environment
      run: |
        echo "Setting up DTAF project..."
        mkdir -p workspace
        cp -r $GITHUB_WORKSPACE/* workspace/
        cd workspace
        
        # Ø¹Ø±Ø¶ Ù…Ø­ØªÙˆÙŠØ§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
        echo "Project structure:"
        find . -type f -name "*.sh" -o -name "*.py" -o -name "*.tcl" | head -20
        
    - name: Create README with Instructions
      run: |
        cat > INSTRUCTIONS.md << 'EOF'
        # ðŸ“š ÙƒÙŠÙÙŠØ© ØªØ´ØºÙŠÙ„ Ù…Ø´Ø±ÙˆØ¹ DTAF
        
        ## Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 1: ØªØ´ØºÙŠÙ„ Ù…Ø­Ù„ÙŠ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ
        1. ØªØ«Ø¨ÙŠØª Ubuntu Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… WSL Ø¹Ù„Ù‰ Windows
        2. ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:
           sudo apt-get install build-essential tcl8.6-dev tk8.6-dev python3 python3-pip
        3. ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:
           ./compile_dtaf.sh
           ./run_all_experiments.sh
           python3 scripts/advanced_analyze.py
        
        ## Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 2: Ø§Ø³ØªØ®Ø¯Ø§Ù… Docker
        1. ØªØ«Ø¨ÙŠØª Docker:
           sudo apt-get install docker.io docker-compose
        2. Ø¨Ù†Ø§Ø¡ ÙˆØªØ´ØºÙŠÙ„:
           docker-compose up
        
        ## Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 3: Ø§Ø³ØªØ®Ø¯Ø§Ù… GitHub Codespaces (Ø§Ù„Ø£Ø³Ù‡Ù„)
        1. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Code ÙÙŠ GitHub
        2. Ø§Ø®ØªØ± Codespaces
        3. Ø£Ù†Ø´Ø¦ codespace Ø¬Ø¯ÙŠØ¯
        4. Ø§ÙØªØ­ Terminal ÙˆØ´ØºÙ„ Ø§Ù„Ø£ÙˆØ§Ù…Ø±
        
        ## Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:
        - compile_dtaf.sh        # Ù„ØªØ±Ø¬Ù…Ø© NS2
        - run_all_experiments.sh # Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ¬Ø§Ø±Ø¨
        - scripts/advanced_analyze.py  # Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        EOF
        
        echo "âœ… Instructions created!"
    
    - name: Upload Project as Artifact
      uses: actions/upload-artifact@v3
      with:
        name: dtaf-project-files
        path: |
          workspace/
          INSTRUCTIONS.md
